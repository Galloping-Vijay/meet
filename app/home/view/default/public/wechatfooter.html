<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<script>
    wx.config({
        debug: false,
        appId: "<?php echo $signPackage['appId';?>",
        timestamp: "<?php echo $signPackage['timestamp'];?>",
    nonceStr: "<?php echo $signPackage['nonceStr'];?>",
        signature: "<?php echo $signPackage['signature'];?>",
        jsApiList: [
        "onMenuShareTimeline",
        "onMenuShareAppMessage",
        "onMenuShareQQ",
        "onMenuShareWeibo",
        "onMenuShareQZone"
    ]
    });
    wx.ready(function () {

        //获取“分享到朋友圈”按钮点击状态及自定义分享内容接口
        wx.onMenuShareTimeline({
            title: '<?php echo $article->title;?>',
            link: '<?php echo $this->url->getStaticBaseUri().$this->url->getBaseUri()."article/index?id=".$article->id."&sid=".$this->session->get("user")->id;?>',
            imgUrl: '<?php echo $this->url->getStaticBaseUri().$this->url->getBaseUri().$article->image;?>',
            success: function () {
                $.ajax({
                    url:'<?=$this->url->getStaticBaseUri().$this->url->getBaseUri()?>user/share?id=<?=$article->id?>',
                    success:function(){
                        alert('分享成功');
                    }});
            }
        });
        // 获取“分享给朋友”按钮点击状态及自定义分享内容接口
        wx.onMenuShareAppMessage({
            title: '<?php echo $article->title;?>',
            desc: '<?php echo $article->description;?>',
            link: '<?php echo $this->url->getStaticBaseUri().$this->url->getBaseUri()."article/index?id=".$article->id."&sid=".$this->session->get("user")->id;?>',
            imgUrl: '<?php echo $this->url->getStaticBaseUri().$this->url->getBaseUri().$article->image;?>',
            success: function (res) {
                $.ajax({
                    url:'<?=$this->url->getStaticBaseUri().$this->url->getBaseUri()?>user/share?id=<?=$article->id?>',
                    success:function(){
                        alert('分享成功');
                    }});
            }
        });


        //获取“分享到QQ”按钮点击状态及自定义分享内容接口
        wx.onMenuShareQQ({
            title: '<?php echo $article->title;?>',
            desc: '<?php echo $article->description;?>',
            link: '<?php echo $this->url->getStaticBaseUri().$this->url->getBaseUri()."/article/index?id=".$article->id."&sid=".$this->session->get("user")->id;?>',
            imgUrl: '<?php echo $this->url->getStaticBaseUri().$this->url->getBaseUri().$article->image;?>',
            success: function () {
                // 用户确认分享后执行的回调函数
            }
        });

        //获取“分享到腾讯微博”按钮点击状态及自定义分享内容接口
        wx.onMenuShareWeibo({
            title: '<?php echo $article->title;?>',
            desc: '<?php echo $article->description;?>',
            link: '<?php echo $this->url->getStaticBaseUri().$this->url->getBaseUri()."/article/index?id=".$article->id."&sid=".$this->session->get("user")->id;?>',
            imgUrl: '<?php echo $this->url->getStaticBaseUri().$this->url->getBaseUri().$article->image;?>',
            success: function () {
                // 用户确认分享后执行的回调函数
            }
        });
        //获取“分享到QQ空间”按钮点击状态及自定义分享内容接口
        wx.onMenuShareQZone({
            title: '<?php echo $article->title;?>',
            desc: '<?php echo $article->description;?>',
            link: '<?php echo $this->url->getStaticBaseUri().$this->url->getBaseUri()."/article/index?id=".$article->id."&sid=".$this->session->get("user")->id;?>',
            imgUrl: '<?php echo $this->url->getStaticBaseUri().$this->url->getBaseUri().$article->image;?>',
            success: function () {
                // 用户确认分享后执行的回调函数
            }
        });
    });

</script>